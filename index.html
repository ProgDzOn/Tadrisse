<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>نموذج التسجيل - أكاديمية التميز</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: 'Cairo', sans-serif; background-color: #f7f7f7; padding: 30px; }
    .form-container { max-width: 500px; margin: auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    label { font-weight: bold; margin-top: 10px; display: block; }
    input, select, button { width: 100%; padding: 10px; margin-top: 5px; border-radius: 5px; border: 1px solid #ccc; }
    button { background-color: #3498db; color: white; font-weight: bold; margin-top: 15px; cursor: pointer; }
    .success, .error { margin-top: 15px; padding: 10px; border-radius: 5px; text-align: center; }
    .success { background-color: #d4edda; color: #155724; }
    .error { background-color: #f8d7da; color: #721c24; }
  </style>
</head>
<body>

<div class="form-container">
  <h2>نموذج التسجيل</h2>
  <form id="registrationForm">
    <label>الاسم الكامل</label>
    <input type="text" name="name" required>

    <label>البريد الإلكتروني</label>
    <input type="email" name="email" required>

    <label>رقم الهاتف</label>
    <input type="tel" name="phone" required>

    <label>المستوى الدراسي</label>
    <select name="level" required>
      <option value="">-- اختر --</option>
      <option value="أولى متوسط">أولى متوسط</option>
      <option value="ثاني متوسط">ثاني متوسط</option>
      <option value="ثالث متوسط">ثالث متوسط</option>
      <option value="رابع متوسط">رابع متوسط</option>
    </select>

    <label>المادة المطلوبة</label>
    <select name="subject" required>
      <option value="">-- اختر --</option>
      <option value="الرياضيات">الرياضيات</option>
      <option value="الفيزياء">الفيزياء</option>
      <option value="العلوم الطبيعية">العلوم الطبيعية</option>
    </select>

    <label>أيام الدروس المناسبة</label>
    <select name="days" required>
      <option value="">-- اختر --</option>
      <option value="السبت والإثنين والأربعاء">السبت والإثنين والأربعاء</option>
      <option value="الأحد والثلاثاء والخميس">الأحد والثلاثاء والخميس</option>
      <option value="نهاية الأسبوع">نهاية الأسبوع</option>
    </select>

    <button type="submit">إرسال</button>

    <div id="formMessage" class="success" style="display: none;"></div>
  </form>
</div>

<script>
  const scriptURL = 'https://script.google.com/macros/s/AKfycbxI8yc58XtzN1pqbKYUI9cf7Ae2Ry1dyyDkEtPGfJ-pLsXXPXl9Y0mwKjUN3dEsOylH5A/exec';

  document.getElementById('registrationForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    const form = e.target;
    const formData = new FormData(form);
    const data = {};

    formData.forEach((value, key) => data[key] = value);

    try {
      const response = await fetch(scriptURL, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
      });

      const result = await response.json();
      const messageDiv = document.getElementById('formMessage');

      if (result.status === 'success') {
        messageDiv.style.display = 'block';
        messageDiv.className = 'success';
        messageDiv.innerText = `✅ تم التسجيل بنجاح! رقم تسجيلك: ${result.registrationNumber}`;
        form.reset();
      } else {
        messageDiv.style.display = 'block';
        messageDiv.className = 'error';
        messageDiv.innerText = `❌ فشل التسجيل: ${result.message}`;
      }
    } catch (error) {
      const messageDiv = document.getElementById('formMessage');
      messageDiv.style.display = 'block';
      messageDiv.className = 'error';
      messageDiv.innerText = `❌ حدث خطأ أثناء الإرسال: ${error.message}`;
    }
  });
</script>

</body>
</html>
